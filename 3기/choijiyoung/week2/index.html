<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>CHOIJI's portfolio</title>

    <!-- core -->
    <link rel="stylesheet" href="./css/style.css" />
    <link rel="stylesheet" href="./css/main.css" />
  </head>

  <body>
    <div id="wrap">
      <header id="header">
        <h1 class="title">CHOIJI</h1>

        <button class="responsive__menu"></button>
        <nav class="nav">
          <div class="tab-container">
            <button data-tab-target="#tab1" class="button active" type="button">
              ABOUT
            </button>
            <button data-tab-target="#tab2" class="button" type="button">
              TIMELINE
            </button>
          </div>
        </nav>
      </header>

      <main id="main">
        <section id="tab1" class="tab-content tab1-content active">
          <h2 class="screen-reader-text about__title">About</h2>
          <div class="about__description">
            <h3 class="about__description-title">I'm Frontend Developer</h3>
            안녕하세요! 프론트엔드 개발자 최지영입니다
          </div>
          <div class="about__skills">
            <img
              src="./images/tab1-HTML5.png"
              class="about__skills-icon"
              alt="HTML5"
            />
            <img
              src="./images/tab1-CSS3.png"
              class="about__skills-icon"
              alt="CSS3"
            />
            <img
              src="./images/tab1-JavaScript.png"
              class="about__skills-icon"
              alt="JavaScript"
            />
            <img
              src="./images/tab1-typescript.png"
              class="about__skills-icon"
              alt="typescript"
            />
            <img
              src="./images/tab1-react.png"
              class="about__skills-icon"
              alt="react"
            />
          </div>
        </section>

        <section id="tab2" class="tab-content tab2-content">
          <article class="inner">
            <h2 class="timeline__title">
              TIMELINE <strong>수상 및 활동</strong>
            </h2>
            <ol class="timeline__list"></ol>
          </article>
        </section>
      </main>

      <footer id="footer">
        Copyright 2023 <strong> @Jiyoung Choi </strong>
      </footer>
    </div>

    <script>
      // tab
      const main = document.querySelector('#main');
      const tabNavigation = document.querySelectorAll('.tab-container .button');
      tabNavigation.forEach((navigation, idx) => {
        navigation.addEventListener('click', () => {
          if (!navigation.classList.contains('active')) {
            const tabId = navigation.dataset.tabTarget;

            navigation.parentNode
              .querySelector('.active')
              .classList.remove('active');
            navigation.classList.add('active');

            main.querySelector('.active').classList.remove('active');
            main.querySelector(tabId).classList.add('active');
          }
        });
      });

      // timeline
      fetch('./json/timeline.json')
        .then((response) => response.json())
        .then((data) => {
          const timeLineList = document.querySelector('.timeline__list');

          data.forEach((project, idx) => {
            const template = document.createElement('template');
            template.innerHTML = `
               <li class="timeline__list-item">
                   <div class="period"></div>
                   <div class="content">
                   <h3 class="title"></h3>
                   <p class="description"></p>
                 </div>
                   </li>

                   `;

            const listElemment = template.content.firstElementChild;
            listElemment.setAttribute('id', `accordion${idx + 1}`);
            listElemment.firstElementChild.setAttribute(
              'data-accordion-target',
              `#accordion${idx + 1}`
            );

            const periodElement = listElemment.querySelector('.period');
            periodElement.textContent = project.period;

            const titleElement = listElemment.querySelector('.title');
            titleElement.textContent = project.title;

            const descriptionElement =
              listElemment.querySelector('.description');
            descriptionElement.textContent = project.description;

            timeLineList.insertAdjacentElement('beforeend', listElemment);
          });
          document
            .querySelector('.responsive__menu')
            .addEventListener('click', (e) => {
              const button = e.target;

              if (button !== null) {
                button.classList.toggle('active');
                document.querySelector('.nav').classList.toggle('active');
              }
            });
        });
    </script>
  </body>
</html>
